!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define([],e):t.Parallaxify=e()}(this,function(){"use strict";var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},e=function(t){this.options=t||{},this.options.backgroundYMin=this.options.backgroundYMin||100,this.options.backgroundYMax=this.options.backgroundYMax||0,this.options.elements=this.options.elements||".js-Parallaxify",this.elements=e.toArray("string"==typeof this.options.elements?document.querySelectorAll(this.options.elements):this.options.elements)};e.toArray=function(t){return Array.prototype.slice.call(t)};try{e.toArray(document.documentElement)}catch(t){e.toArray=function(t){var e,n=[];for(e=0;e<t.length;e++)n.push(t[e])}}return e.prototype={registerUpdate:function(){var t=this;this.requestUpdate(),window.addEventListener("resize",function(){t.requestUpdate()})},requestUpdate:function(){var e=this;this.latestScrollY!=window.pageYOffset&&(this.latestScrollY=window.pageYOffset,this.update()),t(function(){e.requestUpdate()})},update:function(){for(var t=this.elements.length;t--;){var e,n,i,o,s,a,r,u,l=this.elements[t].getBoundingClientRect(),d=window.innerHeight||document.documentElement.clientHeight;l.bottom>0&&l.top<d&&(e=document.documentElement.scrollHeight,n=window.pageYOffset,(i=e-d)&&(s=((n+d*(n/i))/e-(o=Math.max(0,(n+l.top-d)/i)))/(Math.min(1,(n+l.bottom)/i)-o),a=parseInt(this.elements[t].getAttribute("data-parallaxify-y-min"),10),r=parseInt(this.elements[t].getAttribute("data-parallaxify-y-max"),10),isNaN(a)&&(a=this.options.backgroundYMin),isNaN(r)&&(r=this.options.backgroundYMax),""===(u=window.getComputedStyle(this.elements[t],null).getPropertyValue("background-position").split(" "))[0]&&(u[0]="50%"),u[1]=String(s*(r-a)+a)+"%",this.elements[t].style.backgroundPosition=u.join(" ")))}}},e});