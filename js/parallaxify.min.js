!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define([],e):t.Parallaxify=e()}(this,function(){"use strict";var t=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),e=function(t){this.options=t||{},this.options.backgroundYMin=this.options.backgroundYMin||100,this.options.backgroundYMax=this.options.backgroundYMax||0,this.options.elements=this.options.elements||".js-Parallaxify",this.elements=e.toArray("string"==typeof this.options.elements?document.querySelectorAll(this.options.elements):this.options.elements)};e.toArray=function(t){return Array.prototype.slice.call(t)};try{e.toArray(document.documentElement)}catch(t){e.toArray=function(t){var e,n=[];for(e=0;e<t.length;e++)n.push(t[e])}}return e.prototype={registerUpdate:function(){var t=this;this.requestUpdate(),window.addEventListener("resize",function(){t.requestUpdate()})},requestUpdate:function(){var e=this;this.latestScrollY!=window.pageYOffset&&(this.latestScrollY=window.pageYOffset,this.update()),t(function(){e.requestUpdate()})},update:function(){for(var t=this.elements.length;t--;){var e,n,i,o,s,a,r,u,l,d,m,p,c=this.elements[t].getBoundingClientRect(),h=window.innerHeight||document.documentElement.clientHeight;c.bottom>0&&c.top<h&&(e=document.documentElement.scrollHeight,n=window.pageYOffset,i=e-h,i&&(o=n/i,s=h*o,a=(n+s)/e,r=Math.max(0,(n+c.top-h)/i),u=Math.min(1,(n+c.bottom)/i),l=(a-r)/(u-r),d=parseInt(this.elements[t].getAttribute("data-parallaxify-y-min"),10),m=parseInt(this.elements[t].getAttribute("data-parallaxify-y-max"),10),isNaN(d)&&(d=this.options.backgroundYMin),isNaN(m)&&(m=this.options.backgroundYMax),p=window.getComputedStyle(this.elements[t],null).getPropertyValue("background-position").split(" "),""===p[0]&&(p[0]="50%"),p[1]=String(l*(m-d)+d)+"%",this.elements[t].style.backgroundPosition=p.join(" ")))}}},e});